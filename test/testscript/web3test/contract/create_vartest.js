console.log("ETH test!!!!!!!!!");

var Web3 = require('web3');
var web3 = new Web3('http://localhost:8814');


////////////// create //////////////////////////

var bytecode = "608060405234801561001057600080fd5b50610b30806100206000396000f3fe6080604052600436106100f25760003560e01c80636ec232d31161008a5780638fe4b6e4116100595780638fe4b6e4146102c6578063938b5f32146102f1578063a6ae0aac1461031c578063b80777ea14610347576100f2565b80636ec232d31461022e57806373d4a13a146102595780637639ed1b146102845780638381f58a1461029b576100f2565b80633fa4f245116100c65780633fa4f245146101825780634449436c146101ad5780635cf24969146101d857806367e404ce14610203576100f2565b8062a7029b146100f7578063205c9cc7146101225780632a7228391461012c578063335124c714610157575b600080fd5b34801561010357600080fd5b5061010c610372565b6040516101199190610653565b60405180910390f35b61012a610385565b005b34801561013857600080fd5b506101416104d7565b60405161014e9190610687565b60405180910390f35b34801561016357600080fd5b5061016c6104dd565b60405161017991906106bb565b60405180910390f35b34801561018e57600080fd5b506101976104e3565b6040516101a49190610687565b60405180910390f35b3480156101b957600080fd5b506101c26104e9565b6040516101cf9190610687565b60405180910390f35b3480156101e457600080fd5b506101ed6104ef565b6040516101fa9190610687565b60405180910390f35b34801561020f57600080fd5b506102186104f5565b6040516102259190610717565b60405180910390f35b34801561023a57600080fd5b5061024361051b565b6040516102509190610687565b60405180910390f35b34801561026557600080fd5b5061026e610521565b60405161027b91906107c2565b60405180910390f35b34801561029057600080fd5b506102996105af565b005b3480156102a757600080fd5b506102b06105ba565b6040516102bd9190610687565b60405180910390f35b3480156102d257600080fd5b506102db6105c0565b6040516102e89190610687565b60405180910390f35b3480156102fd57600080fd5b506103066105c6565b6040516103139190610717565b60405180910390f35b34801561032857600080fd5b506103316105ec565b60405161033e9190610717565b60405180910390f35b34801561035357600080fd5b5061035c610612565b6040516103699190610687565b60405180910390f35b600860149054906101000a900460e01b81565b4860008190555041600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555044600281905550456003819055504360048190555042600581905550600036600691826103fb929190610a2a565b505a60078190555033600860006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000357fffffffff0000000000000000000000000000000000000000000000000000000016600860146101000a81548163ffffffff021916908360e01c0217905550346009819055503a600a8190555032600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b60035481565b600c5481565b60095481565b60025481565b60005481565b600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600a5481565b6006805461052e9061084d565b80601f016020809104026020016040519081016040528092919081815260200182805461055a9061084d565b80156105a75780601f1061057c576101008083540402835291602001916105a7565b820191906000526020600020905b81548152906001019060200180831161058a57829003601f168201915b505050505081565b600140600c81905550565b60045481565b60075481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60055481565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b61064d81610618565b82525050565b60006020820190506106686000830184610644565b92915050565b6000819050919050565b6106818161066e565b82525050565b600060208201905061069c6000830184610678565b92915050565b6000819050919050565b6106b5816106a2565b82525050565b60006020820190506106d060008301846106ac565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610701826106d6565b9050919050565b610711816106f6565b82525050565b600060208201905061072c6000830184610708565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b8381101561076c578082015181840152602081019050610751565b60008484015250505050565b6000601f19601f8301169050919050565b600061079482610732565b61079e818561073d565b93506107ae81856020860161074e565b6107b781610778565b840191505092915050565b600060208201905081810360008301526107dc8184610789565b905092915050565b600082905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061086557607f821691505b6020821081036108785761087761081e565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026108e07fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826108a3565b6108ea86836108a3565b95508019841693508086168417925050509392505050565b6000819050919050565b600061092761092261091d8461066e565b610902565b61066e565b9050919050565b6000819050919050565b6109418361090c565b61095561094d8261092e565b8484546108b0565b825550505050565b600090565b61096a61095d565b610975818484610938565b505050565b5b818110156109995761098e600082610962565b60018101905061097b565b5050565b601f8211156109de576109af8161087e565b6109b884610893565b810160208510156109c7578190505b6109db6109d385610893565b83018261097a565b50505b505050565b600082821c905092915050565b6000610a01600019846008026109e3565b1980831691505092915050565b6000610a1a83836109f0565b9150826002028217905092915050565b610a3483836107e4565b67ffffffffffffffff811115610a4d57610a4c6107ef565b5b610a57825461084d565b610a6282828561099d565b6000601f831160018114610a915760008415610a7f578287013590505b610a898582610a0e565b865550610af1565b601f198416610a9f8661087e565b60005b82811015610ac757848901358255600182019150602085019450602081019050610aa2565b86831015610ae45784890135610ae0601f8916826109f0565b8355505b6001600288020188555050505b5050505050505056fea2646970667358221220db92140001f85344c87a25ff0ebc30d04101ccf0fbb0fad6b6446e9bb787d4a464736f6c63430008120033";
web3.eth.estimateGas({code: bytecode})
.then(console.log);

var abi = JSON.parse('[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"basefee\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"blockhash_\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"blockhashtest\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"coinbase\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"data\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"gas_left\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"gaslimit\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"gasprice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"number\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"origin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"prevrandao\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"sender\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"sig\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"timestamp\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"value\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"w\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"}]');
var myContract = new web3.eth.Contract(abi);


myContract.deploy({
    data: bytecode
})
.send({
    from: '0x5962974eeb0b17b43edabfc9b747839317aa852f',
    gas: 990000,
    gasPrice: '3000000000000'
}, function(error, transactionHash){ console.log(transactionHash); })
.on('error', function(error){ console.log(error); })
//.on('transactionHash', function(transactionHash){ console.log(transactionHash); })
// .on('receipt', function(receipt){
//    console.log(receipt.contractAddress) // 收据中包含了新的合约地址
// })
//.on('confirmation', function(confirmationNumber, receipt){ console.log(receipt); })
.then(function(newContractInstance){
    console.log(newContractInstance.options.address) // 新地址的合约实例
});